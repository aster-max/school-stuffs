/*---------------------------------------*/
DROP TABLE TBL_RIWAYAT_PENYEWA;
DROP TABLE TBL_PEMBAYARAN_SEWA;
DROP TABLE TBL_KAMAR;
DROP TABLE TBL_FASILITAS_KAMAR;
DROP TABLE TBL_BANGUNAN;
DROP TABLE TBL_PENYEWA;
DROP TABLE TBL_KARYAWAN;
/*---------------------------------------*/
CREATE SEQUENCE P_SEWA_INC START WITH 001 INCREMENT BY 1 NOCACHE;
CREATE SEQUENCE R_SEWA_INC START WITH 001 INCREMENT BY 1 NOCACHE;

CREATE TABLE "TBL_FASILITAS_KAMAR" (
    "ID_F_KAMAR"        VARCHAR(5) NOT NULL,
	"UKURAN_KAMAR"		VARCHAR(10) NOT NULL,
	"KAPASITAS"			NUMERIC(2) NOT NULL,
	"HARGA_BULANAN"		NUMERIC(10,2) NOT NULL,    
    "KASUR"             CHAR(1) NOT NULL,
    "AC_KAMAR"          CHAR(1) NOT NULL,
    "WC_PRIBADI"        CHAR(1) NOT NULL,
    "LEMARI_PAKAIAN"    CHAR(1) NOT NULL,
    "TELEVISI"          CHAR(1) NOT NULL,
    CONSTRAINT "ID_F_KAMAR_PK" PRIMARY KEY ("ID_F_KAMAR") 
);
CREATE TABLE "TBL_PENYEWA" (
	"ID_PENYEWA"	VARCHAR(5) NOT NULL,
	"NAMA"			VARCHAR(40) NOT NULL,
	"J_KELAMIN"		CHAR(1) NOT NULL,
	"TGL_LAHIR"		DATE NOT NULL,
	"NO_HP"			VARCHAR(13) NOT NULL,
	"NO_KK"			VARCHAR(17) NOT NULL,
	CONSTRAINT "ID_PENYEWA_PK" PRIMARY KEY ("ID_PENYEWA")
);
CREATE TABLE "TBL_KARYAWAN" (
	"ID_KARYAWAN"	VARCHAR(5) NOT NULL,
	"NAMA"			VARCHAR(40) NOT NULL,
	"J_KELAMIN"		CHAR(1) NOT NULL,
	"TGL_LAHIR"		DATE NOT NULL,
	"NO_HP"			VARCHAR(13) NOT NULL,
	"STATUS_KERJA"	VARCHAR(15) NOT NULL,
	CONSTRAINT "ID_KARYAWAN_PK" PRIMARY KEY ("ID_KARYAWAN")
);
CREATE TABLE "TBL_BANGUNAN" (
	"ID_BANGUNAN" 	VARCHAR(5) NOT NULL,
	"NAMA_BANGUNAN"	VARCHAR(40) NOT NULL,
	"ALAMAT"		VARCHAR(40) NOT NULL,
	"KECAMATAN"		VARCHAR(20) NOT NULL,
	"TEMPAT_PARKIR"	CHAR(1) NOT NULL,
	"WIFI_UMUM"		CHAR(1) NOT NULL,
	"WC_UMUM"		CHAR(1) NOT NULL,
	"DAPUR_UMUM"	CHAR(1) NOT NULL,
	"LAUNDRY_UMUM"	CHAR(1) NOT NULL,
	"ID_KARYAWAN"	VARCHAR(5) NOT NULL,
	CONSTRAINT "ID_BANGUNAN_PK" PRIMARY KEY ("ID_BANGUNAN"),
	CONSTRAINT "ID_KARYAWAN_FK" FOREIGN KEY ("ID_KARYAWAN") REFERENCES TBL_KARYAWAN("ID_KARYAWAN")	
);
CREATE TABLE "TBL_KAMAR" (
	"ID_KAMAR"		VARCHAR(5) NOT NULL,
	"KETERSEDIAAN"	VARCHAR(15) NOT NULL,	
	"ID_F_KAMAR"	VARCHAR(5) NOT NULL,
	"ID_BANGUNAN"	VARCHAR(5) NOT NULL,
	CONSTRAINT "ID_KAMAR_PK" PRIMARY KEY ("ID_KAMAR"),
	CONSTRAINT "ID_F_KAMAR_FK" FOREIGN KEY ("ID_F_KAMAR") REFERENCES TBL_FASILITAS_KAMAR("ID_F_KAMAR"),
	CONSTRAINT "ID_BANGUNAN_FK" FOREIGN KEY ("ID_BANGUNAN") REFERENCES TBL_BANGUNAN("ID_BANGUNAN")
);
CREATE TABLE "TBL_PEMBAYARAN_SEWA" (
	"ID_P_SEWA"			NUMERIC(3) DEFAULT P_SEWA_INC.nextval NOT NULL,
	"TGL_AWAL_SEWA"		DATE NOT NULL,
	"TGL_AKHIR_SEWA"	DATE NOT NULL,
	"STATUS_BAYAR"		VARCHAR(15) NOT NULL,
	"TGL_BAYAR"			DATE NOT NULL,
	"ID_PENYEWA"		VARCHAR(5) NOT NULL,
	"ID_KAMAR"			VARCHAR(5) NOT NULL,
	CONSTRAINT "ID_P_SEWA_PK" PRIMARY KEY ("ID_P_SEWA"),
	CONSTRAINT "ID_PENYEWA_FK" FOREIGN KEY ("ID_PENYEWA") REFERENCES TBL_PENYEWA ("ID_PENYEWA"),
	CONSTRAINT "ID_KAMAR_FK2" FOREIGN KEY ("ID_KAMAR") REFERENCES TBL_KAMAR("ID_KAMAR")
);
CREATE TABLE "TBL_RIWAYAT_PENYEWA" (
	"ID_R_PENYEWA" 	NUMERIC(3) DEFAULT R_SEWA_INC.nextval NOT NULL,
	"ID_P_SEWA" 	NUMERIC(3) NOT NULL,
	"ID_PENYEWA"	VARCHAR(5) NOT NULL,
	CONSTRAINT "ID_R_PENYEWA_PK" PRIMARY KEY ("ID_R_PENYEWA"),
	CONSTRAINT "ID_P_SEWA_FK" FOREIGN KEY ("ID_P_SEWA") REFERENCES TBL_PEMBAYARAN_SEWA("ID_P_SEWA"),
	CONSTRAINT "ID_PENYEWA_FK2" FOREIGN KEY ("ID_PENYEWA") REFERENCES TBL_PENYEWA("ID_PENYEWA")
);
/*---------------------------------------*/
DESC TBL_FASILITAS_KAMAR;
DESC TBL_PENYEWA;
DESC TBL_KARYAWAN;
DESC TBL_BANGUNAN;
DESC TBL_KAMAR;
DESC TBL_PEMBAYARAN_SEWA;
DESC TBL_RIWAYAT_PENYEWA;
/*--------------------------------------- umur rata-rata penyewa, harga total penyewa, cek kamar yang kosong*/
SELECT SEQUENCE_NAME, SEQUENCE_OWNER
FROM ALL_SEQUENCES WHERE SEQUENCE_NAME LIKE '%INC';
SELECT * FROM TBL_KARYAWAN;
SELECT * FROM TBL_PENYEWA;
/*---------------------------------------*/
INSERT INTO TBL_KARYAWAN VALUES ('KRW01','Abdul Jamal Surbandoro','L',DATE'1975-10-02','082125337746','NON-AKTIF');
INSERT INTO TBL_KARYAWAN VALUES ('KRW02','Aaron Astonvilla Rompis','L',DATE'1980-03-27','081318420901','NON-AKTIF');
INSERT INTO TBL_KARYAWAN VALUES ('KRW03','Siti Nuraini Assegaf','P',DATE'1984-11-19','082319221960','AKTIF');
INSERT INTO TBL_KARYAWAN VALUES ('KRW04','Frienda Simajuntak','P',DATE'1988-04-10','082146807566','NON-AKTIF');
INSERT INTO TBL_KARYAWAN VALUES ('KRW05','Hartono Malgribi','L',DATE'1988-07-24','085611237865','AKTIF');

INSERT INTO TBL_PENYEWA VALUES ('PYW01','Aldy Widanto','L',DATE'1994-12-03','082315664533','31573220562139211');
INSERT INTO TBL_PENYEWA VALUES ('PYW02','Ruben Askalini Jr.','L',DATE'1996-02-21','082148375594','31682925593857293');
INSERT INTO TBL_PENYEWA VALUES ('PYW03','Ahmad Indra Purwoto','L',DATE'1997-11-30','085532145473','31458222885315577');
INSERT INTO TBL_PENYEWA VALUES ('PYW04','Geraldya Sinta Ani','P',DATE'1982-10-21','082445653345','31458222885315577');
INSERT INTO TBL_PENYEWA VALUES ('PYW05','Nurkusuma Devi W.','P',DATE'1969-02-23','082126754865','31458222885315577');
INSERT INTO TBL_PENYEWA VALUES ('PYW06','Purnomo Jammaatan','L',DATE'1999-11-15','084423456623','31720940079298527');
INSERT INTO TBL_PENYEWA VALUES ('PYW07','Juliano Brian Putra','L',DATE'1997-07-12','081287695746','31932795444800090');
INSERT INTO TBL_PENYEWA VALUES ('PYW08','Joseph Brian Putra','L',DATE'1996-10-08','082576764834','31932795444800090');
INSERT INTO TBL_PENYEWA VALUES ('PYW09','Muhammad Akbar Siren','L',DATE'2000-01-23','085699896658','31561411549558204');
INSERT INTO TBL_PENYEWA VALUES ('PYW10','Lingga Rani Kurnia Dewi','P',DATE'2000-03-21','082122456433','31873051094306568');
INSERT INTO TBL_PENYEWA VALUES ('PYW11','Siti Alifah Liliani','P',DATE'1998-06-07','082323658239','31873051094306568');
INSERT INTO TBL_PENYEWA VALUES ('PYW12','Alaniti Winda Ruriani','L',DATE'1999-01-13','081322348574','31266824945485363');
INSERT INTO TBL_PENYEWA VALUES ('PYW13','Muhammad Iqbal Ruriandri','L',DATE'1999-01-13','082588743546','31266824945485363');
INSERT INTO TBL_PENYEWA VALUES ('PYW14','Muhammad Arshad Abdul K.','L',DATE'1996-05-17','082145538896','31193509369438319');
INSERT INTO TBL_PENYEWA VALUES ('PYW15','Diah Merly Lamretta','P',DATE'2000-06-21','082311428957','31786822819688907');
